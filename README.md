Handwritten Remover
---

This is experimental implementation of a tool that removes only the handwritten contents from a document image.

Note: The purpose of this program is to experiment the algorithms, it does not use any machine learning components and can only be used on images that meet certain conditions. Even if the conditions are met, it is not possible to remove the handwritten contents with practical accuracy.


## Directory Structure

```
.
├── images
│    ├── input     # input images
│    └── output    # output images
├── main.py        # script
└── (some omitted)
```


## Usage

```shell
./run.sh {input_image_name} {output_image_name}

# example
./run.sh images/input/image.png images/output/image.png
```


## Algorithm

The program attempts to remove the handwritten contents with the following algorithm.

1. Extract only "color pixels (= pixels other than white or black)".
2. Generates a mask image showing only the black contents based on the results of 1.
3. Extract the contour from the result of 2.
4. Calculate "average color" and "Closest color to white" within each contour.
5. Determine if the content is a handwritten or not based on the result of 4 and the threshold value.
6. Remove printed contents (not determined to be handwritten contents by 5) from result of 2.
7. Apply the mask image that finally generated by 6 to the input image and inpaint.


## Conclusion

In some images, the handwritten contents could be removed with high accuracy, but in most cases the black printed contents were also removed together.
Adding mode color, standard deviation and others within the contour as detect items for handwritten contents may improve accuracy slightly.
